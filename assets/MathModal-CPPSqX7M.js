import{d as x,m as y,r as $,i as M,w as T,j as m,c as d,a as B,o as k,b as o,e as I,g as L,h as A,n as D,_ as V}from"./index-DOUuraA_.js";import{d as p}from"./marked-B-UsxTFJ.js";import q from"./dompurify-CQJ0hv7W.js";import"./html2pdf-GX85U5Jj.js";import"./prismjs-BZbXmqYC.js";const z={key:0,class:"math-modal-mask"},E={class:"modal-body"},H={class:"input-preview-container"},N={class:"form-group input-section"},O={class:"form-group preview-section"},R={class:"preview-container"},S={key:0,class:"math-preview"},j=["innerHTML"],G={key:1,class:"preview-placeholder"},K={class:"formula-toolbar"},U={class:"toolbar-section"},X={class:"toolbar-buttons"},F={class:"toolbar-section"},J={class:"toolbar-buttons"},P={class:"toolbar-section"},Q={class:"toolbar-buttons"},W={class:"toolbar-section"},Y={class:"toolbar-buttons"},Z={class:"toolbar-section"},_={class:"toolbar-buttons"},h={class:"toolbar-section"},c={class:"toolbar-buttons"},tt={class:"toolbar-section"},ot={class:"toolbar-buttons"},nt={class:"toolbar-section"},lt={class:"toolbar-buttons"},st={class:"toolbar-section"},it={class:"toolbar-buttons"},et={class:"toolbar-section"},ut={class:"toolbar-buttons"},bt={class:"toolbar-section"},vt={class:"toolbar-buttons"},rt={class:"toolbar-section"},dt={class:"toolbar-buttons"},kt=x({__name:"MathModal",props:{visible:{type:Boolean},isDarkMode:{type:Boolean},defaultContent:{}},emits:["close","confirm","error"],setup(f,{emit:a}){const b=f;p.use(y({katexOptions:{throwOnError:!1,displayMode:!1,strict:"ignore",trust:!0}}));const e=$(b.defaultContent||""),u=$(),w=M(()=>q.sanitize(p.parse("$$"+e.value+"$$"))),v=a,l=i=>{e.value+=i,r()},s=i=>{e.value+=i,r()},r=async()=>{if(await m(),u.value){u.value.focus();const i=e.value.length;u.value.setSelectionRange(i,i)}},C=()=>{v("close")},g=()=>{if(!e.value.trim()){v("error","请输入公式内容");return}const i=`
$$
 ${e.value}
$$
`;v("confirm",i)};return T(()=>b.visible,i=>{i&&(e.value=b.defaultContent||"",m(()=>r()))}),(i,t)=>i.visible?(k(),d("div",z,[o("div",{class:D(["math-modal",{"app-dark":i.isDarkMode}]),onClick:t[79]||(t[79]=A(()=>{},["stop"]))},[o("div",{class:"modal-header"},[t[80]||(t[80]=o("h3",null,"插入数学公式",-1)),o("button",{class:"modal-close",onClick:C},"×")]),o("div",E,[o("div",H,[o("div",N,[t[81]||(t[81]=o("label",null,"公式内容：",-1)),I(o("textarea",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.value=n),class:"code-preview",rows:"6",placeholder:"请输入LaTeX格式的数学公式（例如：a^2 + b^2 = c^2）",spellcheck:"false",ref_key:"formulaInput",ref:u},null,512),[[L,e.value]])]),o("div",O,[t[82]||(t[82]=o("label",null,"实时预览：",-1)),o("div",R,[e.value?(k(),d("div",S,[o("span",{innerHTML:w.value},null,8,j)])):(k(),d("div",G," 公式预览将显示在这里 "))])])]),o("div",K,[o("div",U,[t[83]||(t[83]=o("h4",null,"基础运算",-1)),o("div",X,[o("button",{onClick:t[1]||(t[1]=n=>l("+"))},"加"),o("button",{onClick:t[2]||(t[2]=n=>l("-"))},"减"),o("button",{onClick:t[3]||(t[3]=n=>l("×"))},"乘"),o("button",{onClick:t[4]||(t[4]=n=>l("÷"))},"除"),o("button",{onClick:t[5]||(t[5]=n=>l("="))},"等于"),o("button",{onClick:t[6]||(t[6]=n=>l("≠"))},"不等于"),o("button",{onClick:t[7]||(t[7]=n=>l("<"))},"小于"),o("button",{onClick:t[8]||(t[8]=n=>l(">"))},"大于"),o("button",{onClick:t[9]||(t[9]=n=>l("≤"))},"小于等于"),o("button",{onClick:t[10]||(t[10]=n=>l("≥"))},"大于等于")])]),o("div",F,[t[84]||(t[84]=o("h4",null,"上下标",-1)),o("div",J,[o("button",{onClick:t[11]||(t[11]=n=>s("a^2"))},"上标"),o("button",{onClick:t[12]||(t[12]=n=>s("a_1"))},"下标"),o("button",{onClick:t[13]||(t[13]=n=>s("e^{x+y}"))},"指数"),o("button",{onClick:t[14]||(t[14]=n=>s("x_{i=1}"))},"下标集")])]),o("div",P,[t[85]||(t[85]=o("h4",null,"分式与根号",-1)),o("div",Q,[o("button",{onClick:t[15]||(t[15]=n=>s("\\frac{a}{b}"))},"分式"),o("button",{onClick:t[16]||(t[16]=n=>s("\\sqrt{x}"))},"平方根"),o("button",{onClick:t[17]||(t[17]=n=>s("\\sqrt[3]{x}"))},"n次方根")])]),o("div",W,[t[86]||(t[86]=o("h4",null,"三角函数",-1)),o("div",Y,[o("button",{onClick:t[18]||(t[18]=n=>l("\\sin"))},"正弦"),o("button",{onClick:t[19]||(t[19]=n=>l("\\cos"))},"余弦"),o("button",{onClick:t[20]||(t[20]=n=>l("\\tan"))},"正切"),o("button",{onClick:t[21]||(t[21]=n=>l("\\cot"))},"余切"),o("button",{onClick:t[22]||(t[22]=n=>l("\\sec"))},"正割"),o("button",{onClick:t[23]||(t[23]=n=>l("\\csc"))},"余割")])]),o("div",Z,[t[87]||(t[87]=o("h4",null,"微积分",-1)),o("div",_,[o("button",{onClick:t[24]||(t[24]=n=>l("\\int"))},"积分"),o("button",{onClick:t[25]||(t[25]=n=>s("\\int_{a}^{b}"))},"定积分"),o("button",{onClick:t[26]||(t[26]=n=>l("\\sum"))},"求和"),o("button",{onClick:t[27]||(t[27]=n=>s("\\sum_{i=1}^{n}"))},"限定求和"),o("button",{onClick:t[28]||(t[28]=n=>l("\\lim"))},"极限"),o("button",{onClick:t[29]||(t[29]=n=>l("\\infty"))},"无穷大"),o("button",{onClick:t[30]||(t[30]=n=>l("\\partial"))},"偏导数")])]),o("div",h,[t[88]||(t[88]=o("h4",null,"矩阵与集合",-1)),o("div",c,[o("button",{onClick:t[31]||(t[31]=n=>s("\\begin{bmatrix}a & b \\\\ c & d\\end{bmatrix}"))},"矩阵"),o("button",{onClick:t[32]||(t[32]=n=>l("\\in"))},"属于"),o("button",{onClick:t[33]||(t[33]=n=>l("\\notin"))},"不属于"),o("button",{onClick:t[34]||(t[34]=n=>l("\\subset"))},"子集"),o("button",{onClick:t[35]||(t[35]=n=>l("\\supset"))},"超集"),o("button",{onClick:t[36]||(t[36]=n=>l("\\cup"))},"并集"),o("button",{onClick:t[37]||(t[37]=n=>l("\\cap"))},"交集")])]),o("div",tt,[t[89]||(t[89]=o("h4",null,"希腊字母",-1)),o("div",ot,[o("button",{onClick:t[38]||(t[38]=n=>l("\\alpha"))},"α"),o("button",{onClick:t[39]||(t[39]=n=>l("\\beta"))},"β"),o("button",{onClick:t[40]||(t[40]=n=>l("\\gamma"))},"γ"),o("button",{onClick:t[41]||(t[41]=n=>l("\\delta"))},"δ"),o("button",{onClick:t[42]||(t[42]=n=>l("\\epsilon"))},"ε"),o("button",{onClick:t[43]||(t[43]=n=>l("\\pi"))},"π"),o("button",{onClick:t[44]||(t[44]=n=>l("\\theta"))},"θ"),o("button",{onClick:t[45]||(t[45]=n=>l("\\lambda"))},"λ"),o("button",{onClick:t[46]||(t[46]=n=>l("\\mu"))},"μ"),o("button",{onClick:t[47]||(t[47]=n=>l("\\omega"))},"ω")])]),o("div",nt,[t[90]||(t[90]=o("h4",null,"逻辑符号",-1)),o("div",lt,[o("button",{onClick:t[48]||(t[48]=n=>l("\\forall"))},"∀"),o("button",{onClick:t[49]||(t[49]=n=>l("\\exists"))},"∃"),o("button",{onClick:t[50]||(t[50]=n=>l("\\Rightarrow"))},"⇒"),o("button",{onClick:t[51]||(t[51]=n=>l("\\Leftrightarrow"))},"⇔"),o("button",{onClick:t[52]||(t[52]=n=>l("\\land"))},"∧"),o("button",{onClick:t[53]||(t[53]=n=>l("\\lor"))},"∨"),o("button",{onClick:t[54]||(t[54]=n=>l("\\neg"))},"¬")])]),o("div",st,[t[91]||(t[91]=o("h4",null,"箭头符号",-1)),o("div",it,[o("button",{onClick:t[55]||(t[55]=n=>l("\\rightarrow"))},"→"),o("button",{onClick:t[56]||(t[56]=n=>l("\\leftarrow"))},"←"),o("button",{onClick:t[57]||(t[57]=n=>l("\\uparrow"))},"↑"),o("button",{onClick:t[58]||(t[58]=n=>l("\\downarrow"))},"↓"),o("button",{onClick:t[59]||(t[59]=n=>l("\\leftrightarrow"))},"↔"),o("button",{onClick:t[60]||(t[60]=n=>l("\\mapsto"))},"↦")])]),o("div",et,[t[92]||(t[92]=o("h4",null,"特殊函数",-1)),o("div",ut,[o("button",{onClick:t[61]||(t[61]=n=>l("\\log"))},"log"),o("button",{onClick:t[62]||(t[62]=n=>l("\\ln"))},"ln"),o("button",{onClick:t[63]||(t[63]=n=>l("!"))},"阶乘"),o("button",{onClick:t[64]||(t[64]=n=>l("\\Gamma"))},"Γ"),o("button",{onClick:t[65]||(t[65]=n=>l("\\beta"))},"β"),o("button",{onClick:t[66]||(t[66]=n=>l("\\max"))},"max"),o("button",{onClick:t[67]||(t[67]=n=>l("\\min"))},"min")])]),o("div",bt,[t[93]||(t[93]=o("h4",null,"向量与矩阵符号",-1)),o("div",vt,[o("button",{onClick:t[68]||(t[68]=n=>s("\\vec{a}"))},"向量"),o("button",{onClick:t[69]||(t[69]=n=>s("A^T"))},"转置"),o("button",{onClick:t[70]||(t[70]=n=>s("|A|"))},"行列式"),o("button",{onClick:t[71]||(t[71]=n=>l("\\nabla"))},"nabla"),o("button",{onClick:t[72]||(t[72]=n=>s("\\mathbf{A}"))},"加粗矩阵")])]),o("div",rt,[t[94]||(t[94]=o("h4",null,"括号类",-1)),o("div",dt,[o("button",{onClick:t[73]||(t[73]=n=>s("(a + b)"))},"小括号"),o("button",{onClick:t[74]||(t[74]=n=>s("[a + b]"))},"中括号"),o("button",{onClick:t[75]||(t[75]=n=>s("\\{a + b\\}"))},"大括号"),o("button",{onClick:t[76]||(t[76]=n=>s("|a + b|"))},"单竖线"),o("button",{onClick:t[77]||(t[77]=n=>s("\\|a + b\\|"))},"双竖线"),o("button",{onClick:t[78]||(t[78]=n=>s("\\left( \\frac{a}{b} \\right)"))},"自适应括号")])])])]),o("div",{class:"modal-footer"},[o("button",{class:"cancel-btn",onClick:C},"取消"),o("button",{class:"confirm-btn",onClick:g},"确认插入")])],2)])):B("",!0)}}),at=V(kt,[["__scopeId","data-v-28e39917"]]);export{at as default};
