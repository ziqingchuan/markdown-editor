import{d as L,r as v,k as H,l as $,m as B,c as E,o as W,b as e,p as D,n as R,_ as y}from"./index-CM6l7Y2U.js";import"./html2pdf-GX85U5Jj.js";import"./marked-B-UsxTFJ.js";import"./dompurify-CQJ0hv7W.js";import"./prismjs-BZbXmqYC.js";const V="data:image/svg+xml,%3csvg%20t='1753256740871'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4280'%20width='64'%20height='64'%3e%3cpath%20d='M768.96%20575.072c-22.144-34.112-54.816-56.8-97.984-68.032v-2.176c22.88-10.88%2042.112-23.04%2057.696-36.48%2015.616-12.704%2027.584-26.144%2035.936-40.288%2016.32-29.76%2024.128-60.96%2023.392-93.632%200-63.872-19.776-115.232-59.328-154.08-39.2-38.464-97.824-58.048-175.84-58.784H215.232v793.728H579.52c62.432%200%20114.496-20.864%20156.256-62.624%2042.112-39.936%2063.52-94.176%2064.224-162.752%200-41.376-10.336-79.68-31.04-114.88zM344.32%20228.832h194.912c43.904%200.736%2076.224%2011.424%2096.896%2032.128%2021.056%2022.144%2031.584%2049.184%2031.584%2081.12s-10.528%2058.432-31.584%2079.488c-20.672%2022.848-52.992%2034.304-96.896%2034.304H344.32V228.832z%20m304.352%20536.256c-20.672%2023.584-53.344%2035.744-97.984%2036.48H344.32v-238.432h206.336c44.64%200.704%2077.312%2012.512%2097.984%2035.392%2020.672%2023.232%2031.04%2051.168%2031.04%2083.84%200%2031.904-10.336%2059.488-31.008%2082.72z'%20p-id='4281'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",S="data:image/svg+xml,%3csvg%20t='1753256779619'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4911'%20width='64'%20height='64'%3e%3cpath%20d='M768%2085.792h-288a32%2032%200%200%200%200%2064h96.32l-230.336%20704H256a32%2032%200%200%200%200%2064h288a32%2032%200%200%200%200-64h-93.728l230.528-704H768a32%2032%200%200%200%200-64z'%20p-id='4912'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20t='1753256799114'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5332'%20width='64'%20height='64'%3e%3cpath%20d='M512%20811.296a312%20312%200%200%200%20312-312V89.6h-112v409.696a200%20200%200%201%201-400%200V89.6h-112v409.696a312%20312%200%200%200%20312%20312zM864%20885.792H160a32%2032%200%200%200%200%2064h704a32%2032%200%200%200%200-64z'%20p-id='5333'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",Y="data:image/svg+xml,%3csvg%20t='1753256790992'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5121'%20width='64'%20height='64'%3e%3cpath%20d='M910.496%20213.536C804.16%2082.208%20611.488%2061.952%20480.128%20168.32l-100.768%2081.6%2050.336%2062.176%20100.768-81.6a225.984%20225.984%200%201%201%20284.448%20351.264l-107.968%2087.424%2050.336%2062.176%20107.968-87.424a305.984%20305.984%200%200%200%2045.248-430.4zM516.352%20823.552a225.984%20225.984%200%201%201-284.448-351.264l110.976-89.856-50.336-62.176-110.976%2089.856C50.24%20516.448%2029.984%20709.152%20136.32%20840.48c106.336%20131.328%20299.04%20151.584%20430.368%2045.248l105.12-85.12-50.336-62.176-105.12%2085.12z'%20p-id='5122'%20fill='%23888888'%3e%3c/path%3e%3cpath%20d='M676.16%20353.28l51.232%2061.44-343.552%20286.304-51.2-61.44z'%20p-id='5123'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",q="data:image/svg+xml,%3csvg%20t='1753256770623'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4701'%20width='64'%20height='64'%3e%3cpath%20d='M300.224%20224L32%20525.76l268.224%20301.76%2071.776-63.776-211.552-237.984%20211.552-237.984zM711.744%20224L640%20287.776l211.552%20237.984L640%20763.744l71.744%2063.776%20268.256-301.76z'%20p-id='4702'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",F="data:image/svg+xml,%3csvg%20t='1753256759531'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4490'%20width='64'%20height='64'%3e%3cpath%20d='M128%20472.896h341.344v341.344H128zM128%20472.896L272.096%20192h110.08l-144.128%20280.896z'%20fill='%23888888'%20p-id='4491'%3e%3c/path%3e%3cpath%20d='M544%20472.896h341.344v341.344H544zM544%20472.896L688.096%20192h110.08l-144.128%20280.896z'%20fill='%23888888'%20p-id='4492'%3e%3c/path%3e%3c/svg%3e",I="data:image/svg+xml,%3csvg%20t='1753261313420'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='8989'%20width='64'%20height='64'%3e%3cpath%20d='M384%20320l512%200c38.4%200%2064-25.6%2064-64%200-38.4-25.6-64-64-64L384%20192C345.6%20192%20320%20217.6%20320%20256%20320%20294.4%20345.6%20320%20384%20320zM896%20448%20384%20448C345.6%20448%20320%20473.6%20320%20512c0%2038.4%2025.6%2064%2064%2064l512%200c38.4%200%2064-25.6%2064-64C960%20473.6%20934.4%20448%20896%20448zM896%20704%20384%20704c-38.4%200-64%2025.6-64%2064%200%2038.4%2025.6%2064%2064%2064l512%200c38.4%200%2064-25.6%2064-64C960%20729.6%20934.4%20704%20896%20704zM128%20192C89.6%20192%2064%20217.6%2064%20256c0%2038.4%2025.6%2064%2064%2064s64-25.6%2064-64C192%20217.6%20166.4%20192%20128%20192zM128%20448C89.6%20448%2064%20473.6%2064%20512c0%2038.4%2025.6%2064%2064%2064s64-25.6%2064-64C192%20473.6%20166.4%20448%20128%20448zM128%20704c-38.4%200-64%2025.6-64%2064%200%2038.4%2025.6%2064%2064%2064s64-25.6%2064-64C192%20729.6%20166.4%20704%20128%20704z'%20p-id='8990'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",N=(u,o)=>{switch(u){case"bold":o=`**${o}**`;break;case"italic":o=`*${o}*`;break;case"underline":o=`<u>${o}</u>`;break;case"link":o=`[${o||"链接文本"}](https://example.com)`;break;case"code":o=`\`${o}\``;break;case"quote":o=`> ${o}`;break;case"list":o=`- ${o}`;break}return o},P=L({__name:"textToolbar",props:{editorRef:{},isDarkMode:{type:Boolean},initialLeft:{},initialTop:{}},emits:["format","positionChange"],setup(u,{emit:o}){const g=u,s=v(),c=v(g.initialLeft||0),m=v(g.initialTop||0),p=v(!1),M=v(0),x=v(0),w=o,a=i=>{var l;if(!g.editorRef)return;const t=((l=window.getSelection())==null?void 0:l.toString())||"",n=N(i,t);w("format",n)},C=i=>{if(!s.value)return;const t=i.target;(i.target===s.value||t.classList.contains("toolbar-btn"))&&(p.value=!0,M.value=i.clientX-c.value,x.value=i.clientY-m.value,document.addEventListener("mousemove",h),document.addEventListener("mouseup",f))},h=i=>{if(!p.value||!s.value)return;const t=s.value.offsetWidth,n=s.value.offsetHeight,l=window.innerWidth,b=window.innerHeight;let r=i.clientX-M.value,d=i.clientY-x.value;r=Math.max(0,Math.min(r,l-t)),d=Math.max(0,Math.min(d,b-n-10)),c.value=r,m.value=d,w("positionChange",r,d)},f=()=>{p.value&&(p.value=!1,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f))},k=()=>{if(!s.value)return;const i=s.value.offsetWidth,t=s.value.offsetHeight,n=10,l=30,b=window.innerWidth-n-i,r=window.innerHeight-l-t;c.value=Math.max(n,b),m.value=Math.max(l,r),w("positionChange",c.value,m.value)},z=()=>{p.value||k()};return H(()=>{$(k),window.addEventListener("resize",z)}),B(()=>{window.removeEventListener("resize",z),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f)}),(i,t)=>(W(),E("div",{class:R(["text-toolbar",{"app-dark":i.isDarkMode}]),ref_key:"toolbarRef",ref:s,style:D({left:c.value+"px",top:m.value+"px"}),onMousedown:C},[e("button",{class:"toolbar-btn",onClick:t[0]||(t[0]=n=>a("bold")),title:"加粗"},t[7]||(t[7]=[e("img",{src:V,alt:"加粗"},null,-1)])),e("button",{class:"toolbar-btn",onClick:t[1]||(t[1]=n=>a("italic")),title:"斜体"},t[8]||(t[8]=[e("img",{src:S,alt:"斜体"},null,-1)])),e("button",{class:"toolbar-btn",onClick:t[2]||(t[2]=n=>a("underline")),title:"下划线"},t[9]||(t[9]=[e("img",{src:X,alt:"下划线"},null,-1)])),e("button",{class:"toolbar-btn",onClick:t[3]||(t[3]=n=>a("link")),title:"链接"},t[10]||(t[10]=[e("img",{src:Y,alt:"链接"},null,-1)])),e("button",{class:"toolbar-btn",onClick:t[4]||(t[4]=n=>a("code")),title:"代码"},t[11]||(t[11]=[e("img",{src:q,alt:"代码"},null,-1)])),e("button",{class:"toolbar-btn",onClick:t[5]||(t[5]=n=>a("quote")),title:"引用"},t[12]||(t[12]=[e("img",{src:F,alt:"引用"},null,-1)])),e("button",{class:"toolbar-btn",onClick:t[6]||(t[6]=n=>a("list")),title:"列表"},t[13]||(t[13]=[e("img",{src:I,alt:"列表"},null,-1)]))],38))}}),K=y(P,[["__scopeId","data-v-e0347fc1"]]);export{K as default};
