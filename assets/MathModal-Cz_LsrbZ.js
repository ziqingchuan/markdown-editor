import{d as h,m as _,r as M,i as c,w as g,j as v,k as w,c as T,a as x,o as L,b as n,e as q,g as A,u as l,h as B,n as E,_ as I}from"./index-n1pew9N4.js";import{d as o}from"./marked-B-UsxTFJ.js";import N from"./dompurify-CQJ0hv7W.js";import"./html2pdf-GX85U5Jj.js";import"./prismjs-BZbXmqYC.js";const D={key:0,class:"math-modal-mask"},O={class:"modal-body"},R={class:"input-preview-container"},S={class:"form-group input-section"},V={class:"form-group preview-section"},z={class:"preview-container"},G={key:0,class:"math-preview"},K=["innerHTML"],j={key:1,class:"preview-placeholder"},F={class:"formula-toolbar"},U={class:"toolbar-section"},X={class:"toolbar-buttons"},J=["innerHTML"],P=["innerHTML"],Q=["innerHTML"],W=["innerHTML"],Y=["innerHTML"],Z=["innerHTML"],nn=["innerHTML"],sn=["innerHTML"],tn=["innerHTML"],on=["innerHTML"],ln={class:"toolbar-section"},en={class:"toolbar-buttons"},rn=["innerHTML"],an=["innerHTML"],$n=["innerHTML"],un=["innerHTML"],bn={class:"toolbar-section"},mn={class:"toolbar-buttons"},dn=["innerHTML"],pn=["innerHTML"],Mn=["innerHTML"],Tn={class:"toolbar-section"},Ln={class:"toolbar-buttons"},Hn=["innerHTML"],vn=["innerHTML"],kn=["innerHTML"],yn=["innerHTML"],Cn=["innerHTML"],fn=["innerHTML"],hn={class:"toolbar-section"},_n={class:"toolbar-buttons"},cn=["innerHTML"],gn=["innerHTML"],wn=["innerHTML"],xn=["innerHTML"],qn=["innerHTML"],An=["innerHTML"],Bn=["innerHTML"],En={class:"toolbar-section"},In={class:"toolbar-buttons"},Nn=["innerHTML"],Dn=["innerHTML"],On=["innerHTML"],Rn=["innerHTML"],Sn=["innerHTML"],Vn=["innerHTML"],zn=["innerHTML"],Gn={class:"toolbar-section"},Kn={class:"toolbar-buttons"},jn=["innerHTML"],Fn=["innerHTML"],Un=["innerHTML"],Xn=["innerHTML"],Jn=["innerHTML"],Pn=["innerHTML"],Qn=["innerHTML"],Wn=["innerHTML"],Yn=["innerHTML"],Zn=["innerHTML"],ns={class:"toolbar-section"},ss={class:"toolbar-buttons"},ts=["innerHTML"],os=["innerHTML"],ls=["innerHTML"],es=["innerHTML"],is=["innerHTML"],rs=["innerHTML"],as=["innerHTML"],$s={class:"toolbar-section"},us={class:"toolbar-buttons"},bs=["innerHTML"],ms=["innerHTML"],ds=["innerHTML"],ps=["innerHTML"],Ms=["innerHTML"],Ts=["innerHTML"],Ls={class:"toolbar-section"},Hs={class:"toolbar-buttons"},vs=["innerHTML"],ks=["innerHTML"],ys=["innerHTML"],Cs=["innerHTML"],fs=["innerHTML"],hs=["innerHTML"],_s=["innerHTML"],cs={class:"toolbar-section"},gs={class:"toolbar-buttons"},ws=["innerHTML"],xs=["innerHTML"],qs=["innerHTML"],As=["innerHTML"],Bs=["innerHTML"],Es={class:"toolbar-section"},Is={class:"toolbar-buttons"},Ns=["innerHTML"],Ds=["innerHTML"],Os=["innerHTML"],Rs=["innerHTML"],Ss=["innerHTML"],Vs=["innerHTML"],zs={class:"modal-footer"},Gs=["disabled"],Ks=h({__name:"MathModal",props:{visible:{type:Boolean},isDarkMode:{type:Boolean},defaultContent:{}},emits:["close","confirm","error"],setup(k,{emit:y}){const u=k;o.use(_({katexOptions:{throwOnError:!0,displayMode:!1,strict:"ignore",trust:!0}}));const a=M(u.defaultContent||""),$=M(),b=M(!1),C=c(()=>{let i;try{b.value=!1,i=N.sanitize(o.parse("$$"+a.value+"$$"))}catch(s){i="公式语法错误，请检查公式内容！",console.error(s.message),b.value=!0}return i}),m=y,e=i=>{a.value+=i,d()},r=i=>{a.value+=i,d()},d=async()=>{if(await v(),$.value){$.value.focus();const i=a.value.length;$.value.setSelectionRange(i,i)}},H=()=>{m("close")},f=()=>{if(!a.value.trim()){m("error","请输入公式内容");return}const i=`
$$
 ${a.value}
$$
`;console.log(i),m("confirm",i)};return g(()=>u.visible,i=>{i&&(a.value=u.defaultContent||"",v(()=>d()))}),w(()=>{if(navigator.userAgent.includes("Firefox")){const i=()=>{document.querySelectorAll("math").forEach(t=>{[...t.childNodes].filter(p=>p.nodeType===3).forEach(p=>t.removeChild(p))})};i(),new MutationObserver(i).observe(document.body,{childList:!0,subtree:!0})}}),(i,s)=>i.visible?(L(),T("div",D,[n("div",{class:E(["math-modal",{"app-dark":i.isDarkMode}]),onClick:s[79]||(s[79]=B(()=>{},["stop"]))},[n("div",{class:"modal-header"},[s[80]||(s[80]=n("h3",null,"插入数学公式",-1)),n("button",{class:"modal-close",onClick:H},"×")]),n("div",O,[n("div",R,[n("div",S,[s[81]||(s[81]=n("label",null,"公式内容：",-1)),q(n("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),class:"code-preview",rows:"6",placeholder:"请输入LaTeX格式的数学公式（例如：a^2 + b^2 = c^2）",spellcheck:"false",ref_key:"formulaInput",ref:$},null,512),[[A,a.value]])]),n("div",V,[s[82]||(s[82]=n("label",null,"实时预览：",-1)),n("div",z,[a.value?(L(),T("div",G,[n("span",{innerHTML:C.value},null,8,K)])):(L(),T("div",j," 公式预览将显示在这里 "))])])]),n("div",F,[n("div",U,[s[83]||(s[83]=n("h4",null,"基础运算",-1)),n("div",X,[n("button",{onClick:s[1]||(s[1]=t=>e("+"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$+$$")},null,8,J)]),n("button",{onClick:s[2]||(s[2]=t=>e("-"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$-$$")},null,8,P)]),n("button",{onClick:s[3]||(s[3]=t=>e("\\times"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\times$$")},null,8,Q)]),n("button",{onClick:s[4]||(s[4]=t=>e("\\div"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\div$$")},null,8,W)]),n("button",{onClick:s[5]||(s[5]=t=>e("="))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$=$$")},null,8,Y)]),n("button",{onClick:s[6]||(s[6]=t=>e("\\neq"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\neq$$")},null,8,Z)]),n("button",{onClick:s[7]||(s[7]=t=>e("<"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$<$$")},null,8,nn)]),n("button",{onClick:s[8]||(s[8]=t=>e(">"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$>$$")},null,8,sn)]),n("button",{onClick:s[9]||(s[9]=t=>e("\\leq"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\leq$$")},null,8,tn)]),n("button",{onClick:s[10]||(s[10]=t=>e("\\geq"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\geq$$")},null,8,on)])])]),n("div",ln,[s[84]||(s[84]=n("h4",null,"上下标",-1)),n("div",en,[n("button",{onClick:s[11]||(s[11]=t=>r("a^2"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$a^2$$")},null,8,rn)]),n("button",{onClick:s[12]||(s[12]=t=>r("a_1"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$a_1$$")},null,8,an)]),n("button",{onClick:s[13]||(s[13]=t=>r("e^{x+y}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$e^{x+y}$$")},null,8,$n)]),n("button",{onClick:s[14]||(s[14]=t=>r("x_{i=1}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$x_{i=1}$$")},null,8,un)])])]),n("div",bn,[s[85]||(s[85]=n("h4",null,"分式与根号",-1)),n("div",mn,[n("button",{onClick:s[15]||(s[15]=t=>r("\\frac{a}{b}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\frac{a}{b}$$")},null,8,dn)]),n("button",{onClick:s[16]||(s[16]=t=>r("\\sqrt{x}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\sqrt{x}$$")},null,8,pn)]),n("button",{onClick:s[17]||(s[17]=t=>r("\\sqrt[3]{x}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\sqrt[3]{x}$$")},null,8,Mn)])])]),n("div",Tn,[s[86]||(s[86]=n("h4",null,"三角函数",-1)),n("div",Ln,[n("button",{onClick:s[18]||(s[18]=t=>e("\\sin"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\sin$$")},null,8,Hn)]),n("button",{onClick:s[19]||(s[19]=t=>e("\\cos"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\cos$$")},null,8,vn)]),n("button",{onClick:s[20]||(s[20]=t=>e("\\tan"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\tan$$")},null,8,kn)]),n("button",{onClick:s[21]||(s[21]=t=>e("\\cot"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\cot$$")},null,8,yn)]),n("button",{onClick:s[22]||(s[22]=t=>e("\\sec"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\sec$$")},null,8,Cn)]),n("button",{onClick:s[23]||(s[23]=t=>e("\\csc"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\csc$$")},null,8,fn)])])]),n("div",hn,[s[87]||(s[87]=n("h4",null,"微积分",-1)),n("div",_n,[n("button",{onClick:s[24]||(s[24]=t=>e("\\int"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\int$$")},null,8,cn)]),n("button",{onClick:s[25]||(s[25]=t=>r("\\int_{a}^{b}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\int_{a}^{b}$$")},null,8,gn)]),n("button",{onClick:s[26]||(s[26]=t=>e("\\sum"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\sum$$")},null,8,wn)]),n("button",{onClick:s[27]||(s[27]=t=>r("\\sum_{i=1}^{n}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\sum_{i=1}^{n}$$")},null,8,xn)]),n("button",{onClick:s[28]||(s[28]=t=>e("\\lim"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\lim$$")},null,8,qn)]),n("button",{onClick:s[29]||(s[29]=t=>e("\\infty"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\infty$$")},null,8,An)]),n("button",{onClick:s[30]||(s[30]=t=>e("\\partial"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\partial$$")},null,8,Bn)])])]),n("div",En,[s[88]||(s[88]=n("h4",null,"矩阵与集合",-1)),n("div",In,[n("button",{onClick:s[31]||(s[31]=t=>r("\\begin{bmatrix}a & b \\\\ c & d\\end{bmatrix}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\begin{bmatrix}a & b \\\\ c & d\\end{bmatrix}$$")},null,8,Nn)]),n("button",{onClick:s[32]||(s[32]=t=>e("\\in"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\in$$")},null,8,Dn)]),n("button",{onClick:s[33]||(s[33]=t=>e("\\notin"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\notin$$")},null,8,On)]),n("button",{onClick:s[34]||(s[34]=t=>e("\\subset"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\subset$$")},null,8,Rn)]),n("button",{onClick:s[35]||(s[35]=t=>e("\\supset"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\supset$$")},null,8,Sn)]),n("button",{onClick:s[36]||(s[36]=t=>e("\\cup"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\cup$$")},null,8,Vn)]),n("button",{onClick:s[37]||(s[37]=t=>e("\\cap"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\cap$$")},null,8,zn)])])]),n("div",Gn,[s[89]||(s[89]=n("h4",null,"希腊字母",-1)),n("div",Kn,[n("button",{onClick:s[38]||(s[38]=t=>e("\\alpha"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\alpha$$")},null,8,jn)]),n("button",{onClick:s[39]||(s[39]=t=>e("\\beta"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\beta$$")},null,8,Fn)]),n("button",{onClick:s[40]||(s[40]=t=>e("\\gamma"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\gamma$$")},null,8,Un)]),n("button",{onClick:s[41]||(s[41]=t=>e("\\delta"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\delta$$")},null,8,Xn)]),n("button",{onClick:s[42]||(s[42]=t=>e("\\epsilon"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\epsilon$$")},null,8,Jn)]),n("button",{onClick:s[43]||(s[43]=t=>e("\\pi"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\pi$$")},null,8,Pn)]),n("button",{onClick:s[44]||(s[44]=t=>e("\\theta"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\theta$$")},null,8,Qn)]),n("button",{onClick:s[45]||(s[45]=t=>e("\\lambda"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\lambda$$")},null,8,Wn)]),n("button",{onClick:s[46]||(s[46]=t=>e("\\mu"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\mu$$")},null,8,Yn)]),n("button",{onClick:s[47]||(s[47]=t=>e("\\omega"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\omega$$")},null,8,Zn)])])]),n("div",ns,[s[90]||(s[90]=n("h4",null,"逻辑符号",-1)),n("div",ss,[n("button",{onClick:s[48]||(s[48]=t=>e("\\forall"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\forall$$")},null,8,ts)]),n("button",{onClick:s[49]||(s[49]=t=>e("\\exists"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\exists$$")},null,8,os)]),n("button",{onClick:s[50]||(s[50]=t=>e("\\Rightarrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\Rightarrow$$")},null,8,ls)]),n("button",{onClick:s[51]||(s[51]=t=>e("\\Leftrightarrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\Leftrightarrow$$")},null,8,es)]),n("button",{onClick:s[52]||(s[52]=t=>e("\\land"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\land$$")},null,8,is)]),n("button",{onClick:s[53]||(s[53]=t=>e("\\lor"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\lor$$")},null,8,rs)]),n("button",{onClick:s[54]||(s[54]=t=>e("\\neg"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\neg$$")},null,8,as)])])]),n("div",$s,[s[91]||(s[91]=n("h4",null,"箭头符号",-1)),n("div",us,[n("button",{onClick:s[55]||(s[55]=t=>e("\\rightarrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\rightarrow$$")},null,8,bs)]),n("button",{onClick:s[56]||(s[56]=t=>e("\\leftarrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\leftarrow$$")},null,8,ms)]),n("button",{onClick:s[57]||(s[57]=t=>e("\\uparrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\uparrow$$")},null,8,ds)]),n("button",{onClick:s[58]||(s[58]=t=>e("\\downarrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\downarrow$$")},null,8,ps)]),n("button",{onClick:s[59]||(s[59]=t=>e("\\leftrightarrow"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\leftrightarrow$$")},null,8,Ms)]),n("button",{onClick:s[60]||(s[60]=t=>e("\\mapsto"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\mapsto$$")},null,8,Ts)])])]),n("div",Ls,[s[92]||(s[92]=n("h4",null,"特殊函数",-1)),n("div",Hs,[n("button",{onClick:s[61]||(s[61]=t=>e("\\log"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\log$$")},null,8,vs)]),n("button",{onClick:s[62]||(s[62]=t=>e("\\ln"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\ln$$")},null,8,ks)]),n("button",{onClick:s[63]||(s[63]=t=>e("!"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$!$$")},null,8,ys)]),n("button",{onClick:s[64]||(s[64]=t=>e("\\Gamma"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\Gamma$$")},null,8,Cs)]),n("button",{onClick:s[65]||(s[65]=t=>e("\\beta"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\beta$$")},null,8,fs)]),n("button",{onClick:s[66]||(s[66]=t=>e("\\max"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\max$$")},null,8,hs)]),n("button",{onClick:s[67]||(s[67]=t=>e("\\min"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\min$$")},null,8,_s)])])]),n("div",cs,[s[93]||(s[93]=n("h4",null,"向量与矩阵符号",-1)),n("div",gs,[n("button",{onClick:s[68]||(s[68]=t=>r("\\vec{a}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\vec{a}$$")},null,8,ws)]),n("button",{onClick:s[69]||(s[69]=t=>r("A^T"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$A^T$$")},null,8,xs)]),n("button",{onClick:s[70]||(s[70]=t=>r("|A|"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$|A|$$")},null,8,qs)]),n("button",{onClick:s[71]||(s[71]=t=>e("\\nabla"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\nabla$$")},null,8,As)]),n("button",{onClick:s[72]||(s[72]=t=>r("\\mathbf{A}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\mathbf{A}$$")},null,8,Bs)])])]),n("div",Es,[s[94]||(s[94]=n("h4",null,"括号类",-1)),n("div",Is,[n("button",{onClick:s[73]||(s[73]=t=>r("(a + b)"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$(a + b)$$")},null,8,Ns)]),n("button",{onClick:s[74]||(s[74]=t=>r("[a + b]"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$[a + b]$$")},null,8,Ds)]),n("button",{onClick:s[75]||(s[75]=t=>r("\\{a + b\\}"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\{a + b\\}$$")},null,8,Os)]),n("button",{onClick:s[76]||(s[76]=t=>r("|a + b|"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$|a + b|$$")},null,8,Rs)]),n("button",{onClick:s[77]||(s[77]=t=>r("\\|a + b\\|"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\|a + b\\|$$")},null,8,Ss)]),n("button",{onClick:s[78]||(s[78]=t=>r("\\left( \\frac{a}{b} \\right)"))},[n("span",{class:"math-symbol",innerHTML:l(o).parse("$$\\left( \\frac{a}{b} \\right)$$")},null,8,Vs)])])])]),n("div",zs,[n("button",{class:"cancel-btn",onClick:H},"取消"),n("button",{class:"confirm-btn",disabled:b.value,onClick:f},"确认插入",8,Gs)])])],2)])):x("",!0)}}),Ps=I(Ks,[["__scopeId","data-v-eb61b243"]]);export{Ps as default};
