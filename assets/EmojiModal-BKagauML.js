import{_ as D}from"./html2pdf-NLN-w5VX.js";import{d as E,r as u,i as M,w as b,c as t,a as h,o as i,b as o,e as L,g as S,n as m,F as B,l as V,h as T,t as f,_ as F}from"./index-DGCz9hQX.js";import"./marked-B-UsxTFJ.js";import"./dompurify-CQJ0hv7W.js";import"./prismjs-BGFVX2yr.js";const I={class:"modal-body"},N={class:"search-container"},P={class:"search-wrapper"},x={key:0,class:"emoji-loading"},z={key:1,class:"emoji-grid"},A=["onClick"],O={class:"emoji-char"},R={class:"emoji-code"},U={key:0,class:"no-results"},$=E({__name:"EmojiModal",props:{visible:{type:Boolean},isDarkMode:{type:Boolean},defaultSearch:{}},emits:["close","select-emoji","error"],setup(_,{emit:k}){const d=_,c=u([]),l=u(d.defaultSearch||""),n=u(!1);let v=!1;const p=M(()=>{if(!l.value)return c.value;const e=l.value.toLowerCase();return c.value.filter(s=>s.shortcode.toLowerCase().includes(e))}),j=e=>e.length<=2?e:e.length>12?e.substring(0,9)+"...":e,r=k,y=async()=>{if(!(v||n.value))try{n.value=!0;const{emojis:e}=await D(async()=>{const{emojis:s}=await import("./emojiData-D9ygz8wM.js");return{emojis:s}},[]);c.value=e,v=!0}catch(e){console.error("Emoji数据加载失败:",e),r("error","表情数据加载失败，请重试")}finally{n.value=!1}},C=e=>{if(!e){r("error","无效的表情符号");return}r("select-emoji",e)},g=()=>{r("close")},w=()=>{r("close")};return b(()=>d.visible,e=>{e&&(l.value=d.defaultSearch||"",y())}),(e,s)=>e.visible?(i(),t("div",{key:0,class:"emoji-modal-mask",onClick:g},[o("div",{class:m(["emoji-modal",{"app-dark":e.isDarkMode}]),onClick:s[1]||(s[1]=T(()=>{},["stop"]))},[o("div",{class:"modal-header"},[s[2]||(s[2]=o("h3",null,"选择 Emoji",-1)),o("button",{class:"modal-close",onClick:w},"×")]),o("div",I,[o("div",N,[o("div",P,[L(o("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>l.value=a),placeholder:"搜索 emoji (按 shortcode)",class:m(["search-input",{"dark-input":e.isDarkMode}])},null,2),[[S,l.value]]),s[3]||(s[3]=o("div",{class:"search-icon"},"🔍",-1))])]),n.value?(i(),t("div",x,s[4]||(s[4]=[o("div",{class:"spinner"},null,-1),o("p",null,"加载表情中...",-1)]))):(i(),t("div",z,[(i(!0),t(B,null,V(p.value,a=>(i(),t("div",{key:a.shortcode,class:m(["emoji-card",{"dark-card":e.isDarkMode}]),onClick:q=>C(a.unicode)},[o("div",O,f(a.unicode),1),o("div",R,":"+f(j(a.shortcode))+":",1)],10,A))),128)),p.value.length===0?(i(),t("div",U," 没有找到匹配的表情符号 ")):h("",!0)]))])],2)])):h("",!0)}}),W=F($,[["__scopeId","data-v-d7382fae"]]);export{W as default};
