import{d as D,r as c,x as B,j as E,y as W,c as y,o as R,z as l,A as r,b as i,T as d,p as V,n as S,_ as X}from"./index-CEiOOekt.js";import"./html2pdf-GX85U5Jj.js";import"./marked-B-UsxTFJ.js";import"./dompurify-CQJ0hv7W.js";import"./prismjs-BZbXmqYC.js";const Y="data:image/svg+xml,%3csvg%20t='1753256740871'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4280'%20width='64'%20height='64'%3e%3cpath%20d='M768.96%20575.072c-22.144-34.112-54.816-56.8-97.984-68.032v-2.176c22.88-10.88%2042.112-23.04%2057.696-36.48%2015.616-12.704%2027.584-26.144%2035.936-40.288%2016.32-29.76%2024.128-60.96%2023.392-93.632%200-63.872-19.776-115.232-59.328-154.08-39.2-38.464-97.824-58.048-175.84-58.784H215.232v793.728H579.52c62.432%200%20114.496-20.864%20156.256-62.624%2042.112-39.936%2063.52-94.176%2064.224-162.752%200-41.376-10.336-79.68-31.04-114.88zM344.32%20228.832h194.912c43.904%200.736%2076.224%2011.424%2096.896%2032.128%2021.056%2022.144%2031.584%2049.184%2031.584%2081.12s-10.528%2058.432-31.584%2079.488c-20.672%2022.848-52.992%2034.304-96.896%2034.304H344.32V228.832z%20m304.352%20536.256c-20.672%2023.584-53.344%2035.744-97.984%2036.48H344.32v-238.432h206.336c44.64%200.704%2077.312%2012.512%2097.984%2035.392%2020.672%2023.232%2031.04%2051.168%2031.04%2083.84%200%2031.904-10.336%2059.488-31.008%2082.72z'%20p-id='4281'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",q="data:image/svg+xml,%3csvg%20t='1753256779619'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4911'%20width='64'%20height='64'%3e%3cpath%20d='M768%2085.792h-288a32%2032%200%200%200%200%2064h96.32l-230.336%20704H256a32%2032%200%200%200%200%2064h288a32%2032%200%200%200%200-64h-93.728l230.528-704H768a32%2032%200%200%200%200-64z'%20p-id='4912'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",N="data:image/svg+xml,%3csvg%20t='1753256799114'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5332'%20width='64'%20height='64'%3e%3cpath%20d='M512%20811.296a312%20312%200%200%200%20312-312V89.6h-112v409.696a200%20200%200%201%201-400%200V89.6h-112v409.696a312%20312%200%200%200%20312%20312zM864%20885.792H160a32%2032%200%200%200%200%2064h704a32%2032%200%200%200%200-64z'%20p-id='5333'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",T="data:image/svg+xml,%3csvg%20t='1753256790992'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5121'%20width='64'%20height='64'%3e%3cpath%20d='M910.496%20213.536C804.16%2082.208%20611.488%2061.952%20480.128%20168.32l-100.768%2081.6%2050.336%2062.176%20100.768-81.6a225.984%20225.984%200%201%201%20284.448%20351.264l-107.968%2087.424%2050.336%2062.176%20107.968-87.424a305.984%20305.984%200%200%200%2045.248-430.4zM516.352%20823.552a225.984%20225.984%200%201%201-284.448-351.264l110.976-89.856-50.336-62.176-110.976%2089.856C50.24%20516.448%2029.984%20709.152%20136.32%20840.48c106.336%20131.328%20299.04%20151.584%20430.368%2045.248l105.12-85.12-50.336-62.176-105.12%2085.12z'%20p-id='5122'%20fill='%23888888'%3e%3c/path%3e%3cpath%20d='M676.16%20353.28l51.232%2061.44-343.552%20286.304-51.2-61.44z'%20p-id='5123'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",j="data:image/svg+xml,%3csvg%20t='1754031610874'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5312'%20width='200'%20height='200'%3e%3cpath%20d='M493.4656%20529.1008l-20.6336-51.2512c-15.0016-36.1984-23.1936-55.808-24.5248-58.7776L416.4608%20352.256c-22.528-47.872-44.2368-71.8848-65.024-71.8848-31.488%200-56.2176%2027.7504-74.3424%2083.1488-13.312-4.608-19.968-11.264-19.968-20.0704%200-25.7536%2015.9232-55.3472%2047.6672-88.6784C336.64%20221.44%20365.2096%20204.8%20390.4512%20204.8c49.408%200%20100.608%2067.072%20153.7536%20201.216l13.568%2033.0752%2015.3088-23.04C667.2896%20275.2%20746.7008%20204.8%20811.3152%20204.8c16.7936%200%2036.5056%204.608%2059.0848%2013.7216l-80.384%2079.36a101.12%20101.12%200%200%200-22.6304-4.352c-48.64%200-106.7008%2052.736-173.9776%20158.1056l-19.2512%2030.4128%2015.2064%2038.3488c58.2144%20151.296%20105.984%20226.8672%20143.872%20226.8672%2034.7136%200%2061.184-23.3472%2079.4112-69.9904%2012.3904%207.5264%2018.5856%2015.2064%2018.5856%2023.1424%200%2020.8896-17.664%2045.8752-53.0944%2075.008-35.4304%2029.184-65.8944%2043.776-91.5968%2043.776-51.3536%200-103.7312-68.096-157.2864-204.3392l-18.5856-46.336-19.2%2031.9488C401.2032%20746.2912%20314.8288%20819.2%20232.5504%20819.2c-30.9248%200-57.2416-7.2704-78.9504-21.7088l76.9536-70.8096c13.312%2012.4928%2028.7744%2018.7392%2046.4896%2018.7392%2049.9712%200%20106.24-47.616%20168.5504-142.9504l34.56-52.5824%2013.312-20.7872z'%20fill='%23999999'%20p-id='5313'%3e%3c/path%3e%3c/svg%3e",A="data:image/svg+xml,%3csvg%20t='1753256770623'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4701'%20width='64'%20height='64'%3e%3cpath%20d='M300.224%20224L32%20525.76l268.224%20301.76%2071.776-63.776-211.552-237.984%20211.552-237.984zM711.744%20224L640%20287.776l211.552%20237.984L640%20763.744l71.744%2063.776%20268.256-301.76z'%20p-id='4702'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",F="data:image/svg+xml,%3csvg%20t='1753256759531'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4490'%20width='64'%20height='64'%3e%3cpath%20d='M128%20472.896h341.344v341.344H128zM128%20472.896L272.096%20192h110.08l-144.128%20280.896z'%20fill='%23888888'%20p-id='4491'%3e%3c/path%3e%3cpath%20d='M544%20472.896h341.344v341.344H544zM544%20472.896L688.096%20192h110.08l-144.128%20280.896z'%20fill='%23888888'%20p-id='4492'%3e%3c/path%3e%3c/svg%3e",I="data:image/svg+xml,%3csvg%20t='1753261313420'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='8989'%20width='64'%20height='64'%3e%3cpath%20d='M384%20320l512%200c38.4%200%2064-25.6%2064-64%200-38.4-25.6-64-64-64L384%20192C345.6%20192%20320%20217.6%20320%20256%20320%20294.4%20345.6%20320%20384%20320zM896%20448%20384%20448C345.6%20448%20320%20473.6%20320%20512c0%2038.4%2025.6%2064%2064%2064l512%200c38.4%200%2064-25.6%2064-64C960%20473.6%20934.4%20448%20896%20448zM896%20704%20384%20704c-38.4%200-64%2025.6-64%2064%200%2038.4%2025.6%2064%2064%2064l512%200c38.4%200%2064-25.6%2064-64C960%20729.6%20934.4%20704%20896%20704zM128%20192C89.6%20192%2064%20217.6%2064%20256c0%2038.4%2025.6%2064%2064%2064s64-25.6%2064-64C192%20217.6%20166.4%20192%20128%20192zM128%20448C89.6%20448%2064%20473.6%2064%20512c0%2038.4%2025.6%2064%2064%2064s64-25.6%2064-64C192%20473.6%20166.4%20448%20128%20448zM128%20704c-38.4%200-64%2025.6-64%2064%200%2038.4%2025.6%2064%2064%2064s64-25.6%2064-64C192%20729.6%20166.4%20704%20128%20704z'%20p-id='8990'%20fill='%23888888'%3e%3c/path%3e%3c/svg%3e",P=(f,e)=>{switch(f){case"bold":e=`**${e}**`;break;case"italic":e=`*${e}*`;break;case"underline":e=`<u>${e}</u>`;break;case"link":e=`[${e||"链接文本"}](https://example.com)`;break;case"code":e=`\`${e}\``;break;case"quote":e=`> ${e}`;break;case"list":e=`- ${e}`;break;case"math":e=` $${e}$`;break}return e},U=D({__name:"TextToolbar",props:{editorRef:{},isDarkMode:{type:Boolean},initialLeft:{},initialTop:{}},emits:["format","positionChange"],setup(f,{emit:e}){const w=f,s=c(),p=c(w.initialLeft||0),g=c(w.initialTop||0),u=c(!1),C=c(0),x=c(0),b=e,n=o=>{var m;if(!w.editorRef)return;const t=((m=window.getSelection())==null?void 0:m.toString())||"",a=P(o,t);b("format",a)},H=o=>{if(!s.value)return;const t=o.target;(o.target===s.value||t.classList.contains("toolbar-btn"))&&(u.value=!0,C.value=o.clientX-p.value,x.value=o.clientY-g.value,document.addEventListener("mousemove",k),document.addEventListener("mouseup",M))},k=o=>{if(!u.value||!s.value)return;const t=s.value.offsetWidth,a=s.value.offsetHeight,m=window.innerWidth,z=window.innerHeight;let v=o.clientX-C.value,h=o.clientY-x.value;v=Math.max(0,Math.min(v,m-t)),h=Math.max(0,Math.min(h,z-a-10)),p.value=v,g.value=h,b("positionChange",v,h)},M=()=>{u.value&&(u.value=!1,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",M))},L=()=>{if(!s.value)return;const o=s.value.offsetWidth,t=s.value.offsetHeight,a=10,m=30,z=window.innerWidth-a-o,v=window.innerHeight-m-t;p.value=Math.max(a,z),g.value=Math.max(m,v),b("positionChange",p.value,g.value)},$=()=>{u.value||L()};return B(()=>{E(L),window.addEventListener("resize",$)}),W(()=>{window.removeEventListener("resize",$),document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",M)}),(o,t)=>(R(),y("div",{class:S(["text-toolbar",{"app-dark":o.isDarkMode}]),ref_key:"toolbarRef",ref:s,style:V({left:p.value+"px",top:g.value+"px"}),onMousedown:H},[l(d,{content:"加粗","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[0]||(t[0]=a=>n("bold"))},t[8]||(t[8]=[i("img",{src:Y,alt:"加粗"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"斜体","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[1]||(t[1]=a=>n("italic"))},t[9]||(t[9]=[i("img",{src:q,alt:"斜体"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"下划线","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[2]||(t[2]=a=>n("underline"))},t[10]||(t[10]=[i("img",{src:N,alt:"下划线"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"链接","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[3]||(t[3]=a=>n("link"))},t[11]||(t[11]=[i("img",{src:T,alt:"链接"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"行内公式","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[4]||(t[4]=a=>n("math"))},t[12]||(t[12]=[i("img",{src:j,alt:"链接"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"行内代码","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[5]||(t[5]=a=>n("code"))},t[13]||(t[13]=[i("img",{src:A,alt:"代码"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"引用块","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[6]||(t[6]=a=>n("quote"))},t[14]||(t[14]=[i("img",{src:F,alt:"引用"},null,-1)]))]),_:1},8,["is-dark-mode"]),l(d,{content:"无序列表","is-dark-mode":o.isDarkMode},{default:r(()=>[i("button",{class:"toolbar-btn",onClick:t[7]||(t[7]=a=>n("list"))},t[15]||(t[15]=[i("img",{src:I,alt:"列表"},null,-1)]))]),_:1},8,["is-dark-mode"])],38))}}),Z=X(U,[["__scopeId","data-v-b7d9fb32"]]);export{Z as default};
